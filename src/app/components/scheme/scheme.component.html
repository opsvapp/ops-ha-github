<div class="container">
  <!--Titulo-->
  <div class="row titulo" style="margin: 25px 0px 15px 0px; width: 40%">
    <h4>{{ "SCHEME.TITLE" | translate }}</h4>
  </div>
  <!--Contenido-->
  <div class="row">
    <div class="col-9">
      <!-- Menu de botones-->
      <div class="btn-group" role="group" style="margin-bottom: 15px">
        <button
          *ngIf="canReview"
          class="btn btn-secondary"
          type="button"
          data-toggle="collapse"
          data-target="#schemeTable"
        >
          {{ "SCHEME.SCHEMELIST" | translate }}
          <i-bs name="chevron-bar-down"></i-bs>
        </button>
        <button
          *ngIf="canCreate"
          class="btn btn-primary"
          type="button"
          data-toggle="collapse"
          data-target="#schemeForm"
        >
          {{ "SCHEME.ADDSCHEME" | translate }}
          <i-bs name="chevron-bar-down"></i-bs>
        </button>
      </div>
      <!-- Area para crear enfermedades -->
      <div
        class="collapse"
        id="schemeForm"
        style="border-left: solid 2px coral; padding-left: 10px"
      >
        <!-- Fila-->
        <div class="row">
          <!--Primera Columna-->
          <div
            class="col-5"
            style="border-right: dotted 2px silver; padding: 15px"
          >
            <!--Ingles-->
            <span class="badge badge-primary">{{
              "SCHEME.ENGLISH" | translate
            }}</span>
            <div class="form-group input-group-sm">
              <label for="name_EN">{{ "SCHEME.NAME" | translate }}</label>
              <input
                [(ngModel)]="nameEN"
                class="form-control"
                type="text"
                name="name_EN"
                id="name_EN"
              />
            </div>
            <div class="form-group input-group-sm">
              <label for="description_EN">{{
                "SCHEME.DESCRIPTION" | translate
              }}</label>
              <input
                [(ngModel)]="descriptionEN"
                class="form-control"
                type="text"
                name="description_EN"
                id="description_EN"
              />
            </div>
            <hr style="border-top: dotted 2px silver" />
            <!--Español-->
            <span class="badge badge-danger">{{
              "SCHEME.SPANISH" | translate
            }}</span>
            <div class="form-group input-group-sm">
              <label for="name_ES">{{ "SCHEME.NAME" | translate }}</label>
              <input
                [(ngModel)]="nameES"
                class="form-control"
                type="text"
                name="name_ES"
                id="name_ES"
              />
            </div>
            <div class="form-group input-group-sm">
              <label for="description_ES">{{
                "SCHEME.DESCRIPTION" | translate
              }}</label>
              <input
                [(ngModel)]="descriptionES"
                class="form-control"
                type="text"
                name="description_ES"
                id="description_ES"
              />
            </div>
          </div>
          <!-- Segunda Columna -->
          <div class="col-5" style="padding: 15px">
            <!--Portugues-->
            <span class="badge badge-warning">{{
              "SCHEME.PORTUGUESE" | translate
            }}</span>
            <div class="form-group input-group-sm">
              <label for="name_PT">{{ "SCHEME.NAME" | translate }}</label>
              <input
                [(ngModel)]="namePT"
                class="form-control"
                type="text"
                name="name_PT"
                id="name_PT"
              />
            </div>
            <div class="form-group input-group-sm">
              <label for="disease_PT">{{
                "SCHEME.DESCRIPTION" | translate
              }}</label>
              <input
                [(ngModel)]="descriptionPT"
                class="form-control"
                type="text"
                name="description_PT"
                id="disease_PT"
              />
            </div>
            <hr style="border-top: dotted 2px silver" />
            <!-- Frances -->
            <span class="badge badge-secondary">{{
              "SCHEME.FRENCH" | translate
            }}</span>
            <div class="form-group input-group-sm">
              <label for="name_FR">{{ "SCHEME.NAME" | translate }}</label>
              <input
                [(ngModel)]="nameFR"
                class="form-control"
                type="text"
                name="name_FR"
                id="name_FR"
              />
            </div>
            <div class="form-group input-group-sm">
              <label for="description_FR">{{
                "SCHEME.DESCRIPTION" | translate
              }}</label>
              <input
                [(ngModel)]="descriptionFR"
                class="form-control"
                type="text"
                name="description_FR"
                id="description_FR"
              />
            </div>
          </div>
        </div>
        <!--Campos de Años-->
        <div class="col-10"><hr /></div>
        <div class="row">
          <div class="col-md-2">
            <div class="form-group input-group-sm">
              <label for="initialYear">{{
                "SCHEME.STARTAGE" | translate
              }}</label>
              <input
                [(ngModel)]="initialYear"
                class="form-control"
                type="number"
                name="initialYear"
                id="initialYear"
              />
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group input-group-sm">
              <label for="finalYear">{{ "SCHEME.ENDAGE" | translate }}</label>
              <input
                [(ngModel)]="finalYear"
                class="form-control"
                type="number"
                name="finalYear"
                id="finalYear"
              />
            </div>
          </div>
          <!-- Modo Listado -->
          <div class="col-md-3">
            <div class="form-check">
              <input
                (click)="setListMode()"
                class="form-check-input"
                type="checkbox"
              />
              <label class="form-check-label" style="color: dodgerblue">
                {{ "SCHEME.LIST" | translate }}
              </label>
            </div>
          </div>
        </div>
        <button (click)="saveScheme()" class="btn btn-success">
          {{ "SCHEME.SAVESCHEME" | translate }}
          <i-bs name="plus-circle"></i-bs>
        </button>
      </div>
      <!-- tabla de enfermedades -->
      <div
        class="collapse"
        id="schemeTable"
        style="
          border-left: solid 2px coral;
          padding-left: 10px;
          margin-top: 15px;
        "
      >
        <table class="table table-striped table-hover table-sm">
          <thead class="thead-dark">
            <tr>
              <th>ID</th>
              <th scope="col">{{ "SCHEME.NAME" | translate }}</th>
              <th scope="col">{{ "SCHEME.DESCRIPTION" | translate }}</th>
              <th scope="col">{{ "SCHEME.ACTIONS" | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of schemeList">
              <td>{{ item.idScheme }}</td>
              <td>
                <span style="white-space: pre-line;" *ngIf="lang == 'es'">{{ item.name_ES }}</span>
                <span style="white-space: pre-line;" *ngIf="lang == 'en'">{{ item.name_EN }}</span>
                <span style="white-space: pre-line;" *ngIf="lang == 'pt'">{{ item.name_PT }}</span>
                <span style="white-space: pre-line;" *ngIf="lang == 'fr'">{{ item.name_FR }}</span>
              </td>
              <td>
                <span style="white-space: pre-line;" *ngIf="lang == 'es'">{{ item.description_ES }}</span>
                <span style="white-space: pre-line;" *ngIf="lang == 'en'">{{ item.description_EN }}</span>
                <span style="white-space: pre-line;" *ngIf="lang == 'pt'">{{ item.description_PT }}</span>
                <span style="white-space: pre-line;" *ngIf="lang == 'fr'">{{ item.description_FR }}</span>
              </td>
              <td>
                <div class="btn-group" role="group">
                  <!--Botones de Acción-->
                  <button
                    *ngIf="canUpdate"
                    (click)="setSchemeId(item.idScheme)"
                    type="button"
                    class="btn btn-warning btn-sm"
                    data-toggle="modal"
                    data-target="#datosNuevos"
                  >
                    <i-bs name="pencil"></i-bs>
                  </button>
                  <button
                    *ngIf="canDelete && item.idScheme > 3"
                    (click)="deleteScheme(item.idScheme)"
                    type="button"
                    class="btn btn-danger btn-sm"
                  >
                    <i-bs name="trash"></i-bs>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Modal para actualizar esquema -->
<div class="modal fade" id="datosNuevos" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ "SCHEME.UPDATESCHEME" | translate }}</h5>
        <br />
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!--Aca va el form-->
        <form>
          <div class="form-row">
            <!--columna Izquierda-->
            <div class="col">
              <!-- English -->
              <span class="badge badge-primary">{{
                "SCHEME.ENGLISH" | translate
              }}</span>
              <div class="form-group input-group-sm">
                <label for="nameEN">{{ "SCHEME.NAME" | translate }}</label>
                <input
                  [(ngModel)]="modalNameEN"
                  class="form-control"
                  type="text"
                  id="modalNameEN"
                  name="modalNameEN"
                />
              </div>
              <div class="form-group input-group-sm">
                <label for="descriptionEN">{{
                  "SCHEME.DESCRIPTION" | translate
                }}</label>
                <input
                  [(ngModel)]="modalDescriptionEN"
                  class="form-control"
                  type="text"
                  id="modalDescriptionEN"
                  name="modalDescriptionEN"
                />
              </div>
              <!-- Español -->
              <span class="badge badge-danger">{{
                "SCHEME.SPANISH" | translate
              }}</span>
              <div class="form-group input-group-sm">
                <label for="nameES">{{ "SCHEME.NAME" | translate }}</label>
                <input
                  [(ngModel)]="modalNameES"
                  class="form-control"
                  type="text"
                  id="modalNameES"
                  name="modalNameES"
                />
              </div>
              <div class="form-group input-group-sm">
                <label for="descriptionES">{{
                  "SCHEME.DESCRIPTION" | translate
                }}</label>
                <input
                  [(ngModel)]="modalDescriptionES"
                  class="form-control"
                  type="text"
                  id="modalDescriptionES"
                  name="modalDescriptionES"
                />
              </div>
            </div>
            <div class="col">
              <!-- Portugues -->
              <span class="badge badge-warning">{{
                "SCHEME.PORTUGUESE" | translate
              }}</span>
              <div class="form-group input-group-sm">
                <label for="namePT">{{ "SCHEME.NAME" | translate }}</label>
                <input
                  [(ngModel)]="modalNamePT"
                  class="form-control"
                  type="text"
                  id="modalNamePT"
                  name="modalNamePT"
                />
              </div>
              <div class="form-group input-group-sm">
                <label for="descriptionPT">{{
                  "SCHEME.DESCRIPTION" | translate
                }}</label>
                <input
                  [(ngModel)]="modalDescriptionPT"
                  class="form-control"
                  type="text"
                  id="modalDescriptionPT"
                  name="modalDescriptionPT"
                />
              </div>
              <!-- French -->
              <span class="badge badge-secondary">{{
                "SCHEME.FRENCH" | translate
              }}</span>
              <div class="form-group input-group-sm">
                <label for="nameEN">{{ "SCHEME.NAME" | translate }}</label>
                <input
                  [(ngModel)]="modalNameFR"
                  class="form-control"
                  type="text"
                  id="modalNameFR"
                  name="modalNameFR"
                />
              </div>
              <div class="form-group input-group-sm">
                <label for="descriptionFR">{{
                  "SCHEME.DESCRIPTION" | translate
                }}</label>
                <input
                  [(ngModel)]="modalDescriptionFR"
                  class="form-control"
                  type="text"
                  id="modalDescriptionFR"
                  name="modalDescriptionFR"
                />
              </div>
            </div>
          </div>
          <hr />
          <div class="form-row">
            <!-- Edad inicial -->
            <div class="col">
              <div class="form-group input-group-sm">
                <label for="modalInitialYear">{{
                  "SCHEME.STARTAGE" | translate
                }}</label>
                <input
                  [(ngModel)]="modalInitialYear"
                  class="form-control"
                  type="number"
                  name="modalInitialYear"
                  id="modalInitialYear"
                />
              </div>
            </div>
            <!-- Edad Final -->
            <div class="col">
              <div class="form-group input-group-sm">
                <label for="modalFinalYear">{{
                  "SCHEME.ENDAGE" | translate
                }}</label>
                <input
                  [(ngModel)]="modalFinalYear"
                  class="form-control"
                  type="number"
                  name="modalFinalYear"
                  id="modalFinalYear"
                />
              </div>
            </div>
            <!-- Modo lista -->
            <div *ngIf="restricted()" class="col">
              <div class="form-check">
                <input
                  (click)="setModalListMode()"
                  [checked]="setModalCheck()"
                  class="form-check-input"
                  type="checkbox"
                />
                <label class="form-check-label" style="color: dodgerblue">
                  {{ "SCHEME.LIST" | translate }}
                </label>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer" style="background-color: lightgray">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          {{ "SCHEME.CLOSE" | translate }}
          <i-bs name="x-circle"></i-bs>
        </button>
        <button
          (click)="updateScheme()"
          type="button"
          class="btn btn-primary"
          data-dismiss="modal"
        >
          {{ "SCHEME.SAVE" | translate }}
          <i-bs name="save"></i-bs>
        </button>
      </div>
    </div>
  </div>
</div>
